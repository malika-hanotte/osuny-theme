<!-- Logo(s) -->
{{ $file := false }}
{{ $file_darkmode := false }}
{{ if eq (printf "%T" .logo) "string" }}
  {{ $file = .logo }}
{{ else }}
  {{ $file = .logo.default }}
  {{ $file_darkmode = .logo.darkmode }}
{{ end }}

<!-- Title -->
{{ $title := site.Title }}
{{ if .title }}
  {{ $title = .title }}
{{ end }}

<!-- Link -->
{{ $link_href :=  site.Home.Permalink }}
{{ if .link_href }}
  {{ $link_href = .link_href }}
{{ end }}
{{ $link_external := false }}
{{ if .link_external }}
  {{ $link_external = .link_external }}
{{ end }}

<a class="logo {{- if $file_darkmode }} with-darkmode {{ end -}}"
   href="{{ $link_href }}"
   title="{{ if $link_external }}{{ i18n "commons.link.blank_aria" (dict "Title" $title) }}{{ else }} {{i18n "commons.index" (dict "Title" $title) }}{{ end }}"
   {{ if $link_external }} target="_blank"{{ end }}>

  {{ if $file }}
    {{ $fileDimensions := partial "GetImageDimensions" (dict "context" . "file" $file "static" true) }}
    <img src="{{ $file }}"
         alt="{{ $title }}"
         height="{{ index $fileDimensions 1 }}"
         width="{{ index $fileDimensions 0 }}">

    {{ if $file_darkmode }}
      {{ $fileDimensions := partial "GetImageDimensions" (dict "context" . "file" $file_darkmode "static" true) }}
      <img class="logo-darkmode"
           src="{{ $file_darkmode }}"
           alt="{{ $title }}"
           height="{{ index $fileDimensions 1 }}"
           width="{{ index $fileDimensions 0 }}">
    {{ end }}
  {{ else }}
    <span class="logo-text">{{ $title }}</span>
  {{ end }}
</a>